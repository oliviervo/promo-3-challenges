<!DOCTYPE HTML>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="/style.css">

  <title></title>
</head>
<body>
  <a href="#?w=500" rel="popup_name" class="poplight"><img src="http://www.imagesdoc.com/var/bayard/storage/images/smk/images-doc/images/images-doc-plus/que-vois-tu/photo-mystere-1-image-3/24513080-1-fre-FR/Photo-mystere-1-Image-3.jpg" data-modal-height="800" data-modal-width="600"></a>


<div id="popup_name" class="popup_block">
  <h2>Developpez.com</h2>
  <p>Soh Tanaka est traduit sur developpez.com.</p>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js">

$(document).ready(function() {
  //Lorsque vous cliquez sur un lien de la classe poplight et que le href commence par #
$('a.poplight[href^=#]').click(function() {
  var popID = $(this).attr('rel'); //Trouver la pop-up correspondante
  var popURL = $(this).attr('href'); //Retrouver la largeur dans le href

  //Récupérer les variables depuis le lien
  var query= popURL.split('?');
  var dim= query[1].split('&amp;');
  var popWidth = dim[0].split('=')[1]; //La première valeur du lien

  //Faire apparaitre la pop-up et ajouter le bouton de fermeture
  $('#' + popID).fadeIn().css({
    'width': Number(popWidth)
  })
  .prepend('<a href="#" class="close"><img src="close_pop.png" class="btn_close" title="Fermer" alt="Fermer" /></a>');

  //Récupération du margin, qui permettra de centrer la fenêtre - on ajuste de 80px en conformité avec le CSS
  var popMargTop = ($('#' + popID).height() + 80) / 2;
  var popMargLeft = ($('#' + popID).width() + 80) / 2;

  //On affecte le margin
  $('#' + popID).css({
    'margin-top' : -popMargTop,
    'margin-left' : -popMargLeft
  });

  //Effet fade-in du fond opaque
  $('body').append('<div id="fade"></div>'); //Ajout du fond opaque noir
  //Apparition du fond - .css({'filter' : 'alpha(opacity=80)'}) pour corriger les bogues de IE
  $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn();

  return false;
});

//Fermeture de la pop-up et du fond
$('a.close, #fade').live('click', function() { //Au clic sur le bouton ou sur le calque...
  $('#fade , .popup_block').fadeOut(function() {
    $('#fade, a.close').remove();  //...ils disparaissent ensemble
  });
  return false;
});
});
</script>
</body>
</html>